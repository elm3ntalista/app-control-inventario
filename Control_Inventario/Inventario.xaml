<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Control_Inventario.Inventario"
             Title="Inventario">
    <StackLayout Padding="10" BackgroundColor="#EFEFEF">
        <Label Text="Productos en Stock"
           FontSize="20"
           FontAttributes="Bold"
           HorizontalOptions="Center" />

        <CollectionView x:Name="ProductosCollection"
                    SelectionMode="Single"
                    SelectionChanged="OnProductoSelected"
                    Margin="0,10,0,0">
            <CollectionView.ItemsLayout>
                <LinearItemsLayout Orientation="Vertical" ItemSpacing="10" />
            </CollectionView.ItemsLayout>
            
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame CornerRadius="8" Padding="10" Margin="0,0,0,10" BackgroundColor="White" HasShadow="True">
                    <StackLayout>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <StackLayout Grid.Column="0" VerticalOptions="Center">
                                    <Label Text="{Binding Nombre}" FontAttributes="Bold" FontSize="16"/>
                                    <Label Text="{Binding Cantidad, StringFormat='Cantidad: {0}'}" FontSize="12"/>
                                    <Label Text="{Binding Proveedor, StringFormat='Proveedor: {0}'}" FontSize="12"/>
                                </StackLayout>

                                <Button Grid.Column="1"
                                        Text="✏️"
                                        FontSize="18"
                                        BackgroundColor="Transparent"
                                        BorderWidth="0"
                                        WidthRequest="44"
                                        HeightRequest="44"
                                        Clicked="OnEditarProducto" />

                                <Button Grid.Column="2"
                                        Text="🗑️"
                                        FontSize="18"
                                        BackgroundColor="Transparent"
                                        BorderWidth="0"
                                        WidthRequest="44"
                                        HeightRequest="44"
                                        Clicked="OnEliminarProducto" />
                            </Grid>
                        </StackLayout>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <Button Text="AGREGAR PRODUCTO"
            BackgroundColor="#2E8B57"
            TextColor="White"
            CornerRadius="8"
            HeightRequest="48"
            Margin="0,12,0,0"
            Clicked="OnAgregarProducto" />
    </StackLayout>
</ContentPage>
